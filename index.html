<head>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
<script src="download.js"></script>
</head>

<body style="margin:0px;padding:0px;overflow:hidden">

 <script src="https://meet.jit.si/external_api.js"></script>

  <script>
    var num = (Math.floor(Math.random() * 1000));
    function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}
    var nombre = getUrlVars()["x"];
	nombre = nombre.replace(/\d+% ?/g, "");
	nombre = decodeURI(nombre);
	var usuarioreal = (nombre + " " + num)
    var domain = "meet.jit.si";
    var options = {
      roomName: "Prepanext",
      parentNode: undefined,
	  userInfo: {
               displayName: (usuarioreal)
    },
    configOverwrite: {
	  defaultLanguage: "es",
      hideFilmstrip: true	  },
	interfaceConfigOverwrite: {
	  DEFAULT_LOCAL_DISPLAY_NAME: 'yo',
	  DEFAULT_REMOTE_DISPLAY_NAME: '',
	  SHOW_CHROME_EXTENSION_BANNER: false,
	  DISABLE_JOIN_LEAVE_NOTIFICATIONS: true,
	  INITIAL_TOOLBAR_TIMEOUT: 3000,
	  TOOLBAR_TIMEOUT: 3000,
	  LOCAL_THUMBNAIL_RATIO: 2/.0, // 0:1
          REMOTE_THUMBNAIL_RATIO: 2/.0, // 0:1
	  SHOW_JITSI_WATERMARK: false,
	  SHOW_WATERMARK_FOR_GUESTS: false,
	  FILM_STRIP_MAX_HEIGHT: 0.000000000000000001,
	  MAXIMUM_ZOOMING_COEFFICIENT: 1.3,
	  TOOLBAR_BUTTONS: [ 'microphone','hangup', 'camera', 'raisehand', 'chat' ],
	  SETTINGS_SECTIONS: [],
                }
    }
	
    var api = new JitsiMeetExternalAPI(domain, options);
	api.executeCommand('toggleFilmStrip');
	api.executeCommand('toggleToolbar');
	api.executeCommand('subject', ('Tu nombre de Usuario es:' + " " + usuarioreal));
	
	api.on('participantLeft', (id2) => {
	var id3 = id2 ["id"];
        window.AppInventor.setWebViewString(id3);
        });
	api.on('participantKickedOut', (kicked) => {
	var kicked2 = kicked ["kicked"];
	window.AppInventor.setWebViewString("kiked"+kicked2 ["local"]);
        });
	api.on("videoConferenceJoined", () => {
        window.AppInventor.setWebViewString(api.getNumberOfParticipants())          
        });
	api.on('readyToClose', (close) => {
	alert(close);
        });
  </script>
</body>

</html>
